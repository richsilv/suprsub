<template name="playerDetails">
	<div id="main-background-image"></div>
	<div class="gap row">
		<div class="large-8 gap columns">
			{{> playerForm}}
		</div>
		<div class="large-8 columns">
			<div class="large-16 columns">
				<div class="ui segment content whitetranslucent height280" id="tabSpace">
					<div class="ui tabular menu">
					  <a class="{{#if tabChoice 'playerTab' 'pitchData'}}active {{/if}}item" name="pitchData" title="List the venues within your selected home area">
					    Selected Venues
					  </a>
					  <a class="{{#if tabChoice 'playerTab' 'availability'}}active {{/if}}item" name="availability" title="Set your availability throughout the week">
					    Availability
					  </a>
					</div>
					{{#if tabChoice 'playerTab' 'pitchData'}}
						{{> pitchData}}
					{{/if}}
					{{#if tabChoice 'playerTab' 'availability'}}
						{{> availability}}
					{{/if}}
				</div>
			</div>
		</div>
	</div>
	<div class="gap row">
		<div class="large-16 columns">
			<div class="ui segment content whitetranslucent" id="areaDetails">
				<div class="row">
					<div class="ui vertical divider show-for-large-only" style="left: 25%"><i class="map icon"></i></div>
					<div class="large-4 columns">
						{{> defineBounds}}
					</div>
					<div class="large-12 columns">
						{{> pitchMapLarge}}
					</div>
				</div>
				{{> playerAreaButtons}}
			</div>
		</div>
	</div>
</template>

<template name="playerForm">
	<div class="large-16 columns">
		<form class="ui form segment content whitetranslucent height280">
		  	<div class="two fields">
		    	<div class="field">
		      		<label>First Name</label>
		      		<div class="ui input" id="firstname">
		      			<input placeholder="First Name" type="text" value="{{first_name}}"/>
		      		</div>
		    	</div>
			    <div class="field">
			      	<label>Surname</label>
			      	<div class="ui input" id="surname">
			      		<input placeholder="Surname" type="text" value="{{last_name}}"/>
			      	</div>
			    </div>
		  	</div>
		  	<div class="ui grid">
			    <div class="ui eleven wide column field">
			      	<label>Preferred Contact</label>
					<div class="ui fluid selection dropdown" title="This is how we'll send you messages and make you aware of relevant postings - you can select more than one">
						<input type="hidden" name="contact">
						<div class="text" id="selectedContact">None</div>
						<i class="dropdown icon"></i>
					  	<div class="menu">
					  		{{#if email 'verified'}}<div class="item active" data-value="2">Email{{#if contactActive 2}} (selected){{/if}}</div>{{/if}}
					    	{{#if service 'facebook'}}<div class="item" data-value="1">Facebook{{#if contactActive 1}} (selected){{/if}}</div>{{/if}}
					    	{{#if service 'twitter'}}<div class="item" data-value="0">Twitter{{#if contactActive 0}} (selected){{/if}}</div>{{/if}}
					  	</div>
					</div>
			    </div>
			    <div class="ui five wide column">
			    	<div class="ui animated fluid positive attached withLabel button glowBase" id="saveButton" title="Save your profile">
					  	<div class="visible content">Save</div>
					  	<div class="hidden content">
					    	<i class="save icon glowBase"></i>
					  	</div>
					</div>
				</div>
		  	</div>
		  	<div class="row">
		  		<ul class="small-block-grid-1 medium-block-grid-3 large-block-grid-1" id="linkTriple">
			  		<li>
				  		<div class="small ui fluid {{#if service 'facebook'}}facebook {{/if}}button" id="facebookButton">
				  			<i class="facebook icon"></i>
				  			{{#if service 'facebook'}}
					  			Facebook Account Linked
					  		{{else}}
					  			Link Facebook Account
					  		{{/if}}
				  		</div>
			  		</li>
			  		<li>
				  		<div class="small ui fluid {{#if service 'twitter'}}twitter {{/if}}button" id="twitterButton">
				  			<i class="twitter icon"></i>
				  			{{#if service 'twitter'}}
					  			Twitter Account Linked
				  			{{else}}
					  			Link Twitter Account
				  			{{/if}}
				  		</div>
		  			</li>
			  		<li>
				  		<div class="small ui fluid {{#if email 'verified'}}orange {{/if}}button"{{#if email}} title="{{email}}"{{/if}} id="emailButton">
				  			<i class="mail icon"></i>
				  			{{#if email 'verified'}}
					  			Email address verified
				  			{{else}}
				  				{{#if email 'unverified'}}
					  				Waiting for email verification
					  			{{else}}
					  				Link Email Account
				  				{{/if}}
				  			{{/if}}
				  		</div>
			  		</li>
			  	</ul>
		  	</div>
		</form>
	</div>
	<div id="linkModalHolder">
	</div>
</template>

<template name="pitchData">
	<table class="ui darkgreen table segment" id="pitchTable">
		<thead><tr><th class="tableProvider">Provider</th><th class="tableLocation">Location</th></tr></thead>
		<div id="pitchTableDiv">
			<tbody>
				{{#each getVenues}}
					<tr><td class="tableProvider">{{this.owner}}</td><td class="tableLocation">{{this.name}}</td></tr>
				{{/each}}
			</tbody>
		</div>
	</table>
</template>

<template name="availability">
	<table class="ui green table segment" id="availabilityTable">
		<thead><tr><td class="tableSpaceBlock"></td>{{#each days}}<th class="dayHeader rotated_cell"><div class="rotate">{{this.name}}</div></th>{{/each}}</tr></thead>
		<div style="display: block; max-height: 100px;">
			<tbody>
				{{#each periods}}
					<tr>
						<td class="tablePeriod">{{this.name}}</td>
						{{> availabilityDays extendedData}}
					</tr>
				{{/each}}
			</tbody>
		</div>
	</table>
</template>

<template name="availabilityDays">
	{{#each days}}
		<td class="tableCheckboxHolder">
			<div class="ui">
				<input type="checkbox" id="{{../periodCode}}/{{dayCode}}">
				<label for="{{../periodCode}}/{{dayCode}}"></label>
			</div>
		</td>
	{{/each}}
</template>

<template name="defineBounds">
	<form class="ui form segment content whitetranslucent">
		<h3 class="ui header"><i class="resize full icon"></i><div class="content">Neighbourhood Size<div class="sub header">use the slider to change the size of the area</div></div></h3>
		<div id="distanceWriteLabel"><h4 class="ui header">Area size</h4><h3 class="ui header"><output for="distanceWrite" id="distanceRead"></output></h3></div>
		<div class="field">
			<input id="distanceWrite" type="range" min="0" max="250" />
		</div>
	</form>
</template>

<template name="pitchMapLarge">
	{{#constant}}
	<div class="ui row large" id="pitchMap" style="display: none;"></div>
	{{/constant}}
</template>

<template name="playerAreaButtons">
	<div class="ui two large buttons cancelOrSave" id="cancelOrSave">
		<div class="ui red animated{{#if unmoved}} disabled{{/if}} button" id="revertBoundsButton"{{#unless unmoved}} title="Reset your area to the last time it was saved"{{/unless}}>
			<div class="visible content">Reset</div>
			<div class="hidden content"><i class="backward icon"></i></div>
		</div>
		<div class="ui green animated{{#if unmoved}} disabled{{/if}} button" id="saveBoundsButton"{{#unless unmoved}}  title="Save your home area as it appears on the map now"{{/unless}}>
			<div class="visible content">Save</div>
			<div class="hidden content"><i class="save icon"></i></div>
		</div>	
	</div>
</template>

<template name="linkModal">
	<div class="ui small modal" id="linkModal">
		<div class="ui row">
			<div class="ui column">
				<form class="ui form segment content grid">
			  		<div class="inline field row">
			      		<div class="ui input" id="email">
			      			<input placeholder="Email Address" type="email" id="emailEntry" />
			      		</div>
			    	</div>
					<div class="inline field row">
			      		<div class="ui input" id="password">
			      			<input placeholder="Password" type="password" id="passwordEntry" />
			      		</div>
			    	</div>
			    	<div class="two fluid ui buttons row">
	    		  		<div class="ui negative button" id="emailCancel">
				  			<i class="remove icon"></i>
				  			Cancel
				  		</div>
	    		  		<div class="ui orange button" id="emailSubmit">
				  			<i class="mail icon"></i>
				  			Submit
				  		</div>
				  	</div>
		    	</form>
			</div>    			
		</div>
	</div>
</template>

<template name="duplicateEmail">
	<div class="ui row">
		<div class="ui column">
			<h3 class="ui dividing header">
				E-mail already registered
			</h3>
			<p>That e-mail address is already registered on the system as a separate user.</p>
			<p>If you would like to link it to this profile, you will need to do the following:</p>
			<ul>
				<li>Log out of this account.</li>
				<li>Log back in using the e-mail <em>{{this.email}}</em>.</li>
				<li>Select <strong>Close this Account</strong> from the system menu.</li>
				<li>Log back into this account, from which you will now be able to link that e-mail address.</li>
			</ul>
			<p>Sorry about that, but this is necessary to prevent accounts being hijacked.</p>
		</div>
	</div>
</template>